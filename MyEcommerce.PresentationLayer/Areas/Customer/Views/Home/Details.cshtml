@model CartItemViewModel
<form method="post">
    <section class="py-5">
        <div class="container px-4 px-lg-5 my-5">
            <input hidden asp-for="@Model.ProductId" value="@Model.ProductId" />
            <div class="row gx-4 gx-lg-5 align-items-start">
                <div class="col-md-6 mb-5">
                    <div class="product-image-wrapper position-relative shadow-sm border rounded-4 overflow-hidden" style="background-color: #f8f9fa;">
                        @if (Model.Product.Discount > 0)
                        {
                            <div class="badge position-absolute"
                                 style="top: 20px; right: 20px; background-color: #e63946; color: white; padding: 8px 20px; border-radius: 50px; font-weight: bold; font-size: 1.2rem; z-index: 10;">
                                -@Model.Product.Discount.ToString("0")%
                            </div>
                        }
                        <img class="card-img-top w-100" src="~/@Model.Product.Image" alt="@Model.Product.Name"
                             style="object-fit: contain; min-height: 450px; max-height: 600px;" />
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="mb-1">
                        <span class="badge bg-secondary text-uppercase px-3 py-2" style="border-radius: 5px;">@Model.Product.CategoryName</span>
                    </div>

                    <h3 class="display-6 fw-bold mb-2" style="color: #212529;">@Model.Product.Name</h3>

                    <div class="mb-5">
                        @if (Model.Product.Discount > 0)
                        {
                            <div class="d-flex align-items-center flex-wrap gap-2">
                                <span class="text-muted text-decoration-line-through" style="font-size: 1.8rem;">
                                    @Model.Product.Price.ToString("N2")
                                </span>
                                <span class="fw-bold" style="color: #d0021b; font-size: 2rem;">
                                    @Model.Product.AcualPrice.ToString("N2")
                                </span>
                            </div>

                            <div class="mt-2">
                                <span class="badge" style="background-color: #1f8a55; color: white; padding: 10px 20px; border-radius: 8px; font-size: 1.3rem;">
                                    <span> @Model.Product.Discount.ToString("0")% وفرت</span>
                                </span>
                            </div>
                        }
                        else
                        {
                            <div class="fw-bold" style="font-size: 2.5rem; color: #212529;">
                                @Model.Product.Price.ToString("N2")
                            </div>
                        }
                    </div>

                    <div class="lead mb-4 fs-5 text-secondary">
                        @Html.Raw(Model.Product.Description)
                    </div>

                    <div class="d-flex align-items-center gap-3 mb-4 flex-wrap">
                        @if (Model.Product.StockQuantity > 0)
                        {
                            <div class="input-group" style="max-width: 160px; border: 1px solid #ced4da; border-radius: 12px; overflow: hidden; height: 55px;">
                                <button class="btn btn-light border-0" type="button" onclick="document.getElementById('inputQuantity').stepDown()" style="width: 50px;">-</button>
                                <input class="form-control text-center border-0 fw-bold fs-5" id="inputQuantity" asp-for="Count" min="1" type="number" max="@Model.Product.StockQuantity" value="1" />
                                <button class="btn btn-light border-0" type="button" onclick="document.getElementById('inputQuantity').stepUp()" style="width: 50px;">+</button>
                            </div>

                            @if (!User.IsInRole(Helper.AdminRole)&&!User.IsInRole(Helper.EditorRole))
                            {
                                <button class="btn btn-dark px-5 py-3 shadow-sm flex-grow-1 flex-md-grow-0" type="submit" style="border-radius: 50px; font-weight: bold; height: 55px;">
                                    <i class="bi-cart-fill me-2"></i> أضف إلى السلة
                                </button>
                            }
                        }
                        else
                        {
                            <button class="btn btn-danger px-5 py-3 shadow-sm" disabled style="border-radius: 50px; font-weight: bold; height: 55px;">تم نفاذ الكمية</button>
                        }
                    </div>

                    <div class="row">
                        <div class="col-10">
                            <a class="btn btn-primary w-100 py-3 shadow-sm d-flex align-items-center justify-content-center" href="/" role="button"
                               style="background-color: #007bff; border: none; border-radius: 50px; font-weight: bold; height: 55px;">
                                <i class="bi bi-house-door-fill me-2"></i> متابعة التسوق
                            </a>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </section>
</form>